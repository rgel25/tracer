<%- layout('layout/dashboard') %>

<div class='container mt-5'>
    <div class='row'>
        <div class="card col-lg-3 text-start shadow">
            <div class='card-header'>
                <h2 class="card-title">Project Details</h2>
                </div>
                <div class="card-body">
                    <div class="card-text pt-4">
                        <p>Project Name: <%= projects[0].project_name %></p>
                        <p>Description: <%= projects[0].project_description %></p>
                        <p>Start Date: <%= projects[0].project_start %></p>
                        <p>Deadline: <%= projects[0].project_end %></p>
                        <p>Priority: <%= projects[0].projectPriority.name %></p>
                    </div>
                    <a href='/dashboard/projects' class="btn btn-theme-dark">Go Back</a>
                </div>
            </div>

        <div class='col-lg-9'>
            <div class='card shadow'>
                <div class='card-body'>
                <table class='table table-hover  align-middle'>
                    <thead class='align-middle'>
                        <tr>
                            <th class='p-3'>Ticket Title</th>
                            <th>Priority</th>
                            <th>Status</th>
                            <th>Type</th>
                            <th class='col-2'>Details</th>
                        </tr>
                    </thead>
                    <tbody >
                        <% projects[0].tickets.forEach(ticket => { %> 
                            <tr> 
                                <td><%= ticket.title %> </td>
                                <td><%= ticket.ticketType.name%> </td>
                                <td><%= ticket.ticketStatus.name %> </td>
                                <td><%= ticket.ticketPriority.name %> </td>
                    
                                <td class='text-center'>    
                                    <a href=""><i class="bi bi-eye-fill text-primary fs-4 pe-1"></i></a>
                                    <a href=""><i class="bi bi-pencil-square text-warning fs-4 pe-1"></i></a>
                                    <a data-bs-toggle="modal" data-bs-target="#deleteModalTicketID"><i class="bi bi-trash3-fill text-danger fs-4 pe-1" id="deleteButton"></i></a>
                                </td>
                            </tr>

                            <!-- modal -->
                  <div
                  class="modal fade"
                  id="deleteModalTicketID"
                  tabindex="-1"
                  aria-labelledby="exampleModalLabel"
                  aria-hidden="true"
                >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">
                        Confirm Delete
                      </h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to delete this ticket?
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                      >
                        Close
                      </button>
                      <form
                        class="d-inline"
                        action=""
                        method="POST"
                      >
                        <button type="submit" class="btn btn-danger">Delete</button>
                      </form>
                            
                        <% }) %> 

                    </tbody>
                </table>
                    
                </div>
            </div>
        </div>
    </div>
        
</div>